---
layout: default
---

{% include home-header.html %}

<article class="post">
  <h1 class="post-title">{{ page.title }}</h1>
  <div class="post-meta">
    {%- assign date_format = site.date_format | default: "%-d %b %Y" -%}
    <span class="post-meta-item post-meta-date">
      <img class="post-meta-icon" src="{{ 'assets/img/calender.png' | relative_url }}" alt="" aria-hidden="true">
      <time datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">{{ page.date | date: date_format }}</time>
      {%- if page.last_modified_at -%}
        <span> ~ </span>
        {%- assign mdate = page.last_modified_at | date_to_xmlschema -%}
        <time datetime="{{ mdate }}" itemprop="dateModified">
          {{ mdate | date: date_format }}
        </time>
      {%- endif -%}
    </span>
    <span class="post-meta-item post-meta-views">
      <img class="post-meta-icon" src="{{ 'assets/img/eye.png' | relative_url }}" alt="" aria-hidden="true">
      <span class="post-meta-label">조회수:</span>
      <span class="post-view-count" data-post-path="{{ page.url | relative_url }}">0</span>
    </span>
    {%- if page.categories and page.categories != empty -%}
      <span class="post-meta-item post-meta-categories">
        <img class="post-meta-icon" src="{{ 'assets/img/category.png' | relative_url }}" alt="" aria-hidden="true">
        <span class="post-meta-label">카테고리:</span>
        <span class="post-meta-categories-list">
          {%- for category in page.categories -%}
            {% assign slugified_category = category | slugify %}
            <a class="post-category" href="{{ '/categories/' | relative_url }}#{{ slugified_category }}">
              <span class="post-category-text">{{ category | escape }}</span>
            </a>
          {%- endfor -%}
        </span>
      </span>
    {%- endif -%}
    {%- if page.author -%}
      <span> • </span>
      {% for author in page.author %}
        <span itemprop="author" itemscope itemtype="http://schema.org/Person">
          {{ author }}
        </span>
        {%- if forloop.last == false %}, {% endif -%}
      {% endfor %}
    {%- endif -%}
  </div>

  {{ content }}

  {% if page.tags %}
    {% include post-tags.html %}
  {% endif %}

  {% if site.giscus and page.comments != false %}
    {% include giscus.html %}
  {% elsif jekyll.environment == "production" and site.disqus and page.comments != false %}
    {% include disqus.html %}
  {% endif %}
</article>

<script>
  (function () {
    const viewEl = document.querySelector(".post-view-count[data-post-path]");
    if (!viewEl) return;

    const postPath = viewEl.getAttribute("data-post-path");
    if (!postPath) return;

    function normalizePath(path) {
      try {
        const url = new URL(path, window.location.origin);
        return url.pathname + url.search;
      } catch (_) {
        return path;
      }
    }

    function encodePath(path) {
      const trimmed = String(path || "").replace(/^\/+/, "");
      if (!trimmed) return "";
      return trimmed.split("/").map(encodeURIComponent).join("/");
    }

    const normalizedPath = normalizePath(postPath);
    const endpoint = `https://kovar1523.goatcounter.com/counter/${encodePath(normalizedPath)}.json`;

    fetch(endpoint, { mode: "cors", credentials: "omit" })
      .then((res) => res.json())
      .then((data) => {
        const views = Number.parseInt(data && data.count ? data.count : "0", 10);
        viewEl.textContent = Number.isFinite(views) ? views.toLocaleString() : "-";
      })
      .catch(() => {
        viewEl.textContent = "-";
      });
  })();
</script>

{% include floating-back-to-top.html %}

{% if site.related_posts != empty %}
<aside class="related">
  <h2>관련 게시물</h2>
  <ul class="related-posts">
    {% for post in site.related_posts limit:3 %}
      <li>
        <a href="{{ post.url | relative_url }}">
          {{ post.title }}
          <small><time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: date_format }}</time></small>
        </a>
      </li>
    {% endfor %}
  </ul>
</aside>
{% endif %}
